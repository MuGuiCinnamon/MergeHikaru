<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>合成大遗子</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sprites.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    
</head>
<body>
    <!-- 动态背景画布 -->
     <div id="transition-mask" class="transition-mask"></div>
    <canvas id="dynamic-background"></canvas>
    <div class="container">
        <!-- 右上角菜单按钮 -->
    <div class="menu-container">
        <button id="menu-toggle" class="menu-toggle-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- 菜单面板 -->
    <div id="menu-panel" class="menu-panel">
        <div class="menu-header">
            <h3><i class="fas fa-gamepad"></i> 游戏信息</h3>
            <button id="menu-close" class="menu-close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="menu-content">
            <!-- 统计信息 -->
            <div class="menu-stats">
                <div class="stat-item">
                    <i class="fas fa-clock"></i>
                    <div class="stat-info">
                        <span class="stat-label">游戏总时长</span>
                        <span id="total-play-time" class="stat-value">00:00:00</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fas fa-trophy"></i>
                    <div class="stat-info">
                        <span class="stat-label">历史最高分</span>
                        <span id="menu-highest-score" class="stat-value">0</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fas fa-cogs"></i>
                    <div class="stat-info">
                        <span class="stat-label">合成轮子总数</span>
                        <span id="total-wheel-count" class="stat-value">0</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fas fa-chart-line"></i>
                    <div class="stat-info">
                        <span class="stat-label">当前游戏分数</span>
                        <span id="menu-current-score" class="stat-value">0</span>
                    </div>
                </div>
            </div>
            
            <!-- 分隔线 -->
            <div class="menu-divider"></div>
            
            <!-- 设置选项 -->
            <div class="menu-settings">
                <h4><i class="fas fa-sliders-h"></i> 游戏设置</h4>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-volume-up"></i>
                        <span>游戏音乐</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="music-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-bell"></i>
                        <span>游戏音效</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="sound-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-palette"></i>
                        <span>特殊效果</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="effects-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <!-- 分隔线 -->
            <div class="menu-divider"></div>
            
            <!-- 操作按钮 -->
            <div class="menu-actions">
                <button id="menu-restart" class="btn-menu-action">
                    <i class="fas fa-redo"></i> 重新开始
                </button>
                
                <button id="menu-reset-stats" class="btn-menu-action">
                    <i class="fas fa-trash-alt"></i> 重置统计
                </button>
                
                <button id="menu-about" class="btn-menu-action">
                    <i class="fas fa-info-circle"></i> 关于游戏
                </button>
            </div>
        </div>
        
        <!-- 版本信息 -->
        <div class="menu-footer">
            <p>合成大遗子 v2.0</p>
            <p class="menu-hint">提示：按 <kbd>ESC</kbd> 键可快速关闭菜单</p>
        </div>
    </div>

    <!-- 菜单遮罩 -->
    <div id="menu-overlay" class="menu-overlay"></div>
        <main class="game-area">
            <div class="game-board">
                <div id="game-canvas"></div>
                
                <div class="game-controls">
                    <button id="restart-btn" class="btn btn-restart">
                        <i class="fas fa-redo"></i> 重来
                    </button>
                    <div class="btn btn-sound">
                        
                        <div id="next-fruit" class="next-fruit" data-type="0"></div>
                        <span class="next-label">下一个:</span>
                    </div>
                    <button id="pause-btn" class="btn btn-pause">
                        <i class="fas fa-pause"></i> 暂停
                    </button>

                </div>
            </div>

            <div class="instructions">
                <div class="game-info">
                    
                    <div class="score-container">
                        <span class="score-label">分数:</span>
                        <span id="score" class="score-value">0</span>
                    </div>
                    <div class="level-container">
                        <span class="level-label">目标:</span>
                        <span id="target-fruit" class="target-fruit">？？？</span>
                    </div>
                </div>

                <h2><i class="fas fa-info-circle"></i> 游戏说明</h2>
                <ul>
                    <li>移动：
                        <i class="fa-solid fa-computer-mouse"></i>，
                        <i class="fa-solid fa-up-long"></i>
                        <i class="fa-solid fa-down-long"></i>
                        <i class="fa-solid fa-left-long"></i>
                        <i class="fa-solid fa-right-long"></i>
                    </li> 
                    <li>控制下落的<strong>遗子碎片</strong>，将其放置在合适的位置</li>
                    
                    <li>当两个<strong>相同的碎片</strong>接触时，会合成一个更大的遗子碎片</li>
                    <li>如果碎片堆到顶部的丝线，遗子被切开，游戏结束</li>
                </ul>
                
                
                <div class="fruit-reference">
                    <h3><i class="fa-solid fa-eye"></i></i> 合成表</h3>
                    <div id="fruit-reference-list"></div>
                </div>
            </div>
        </main>

        <div id="game-over" class="game-over-modal">
            <div class="modal-content">
                <h2><i class="fas fa-trophy"></i> 游戏结束!</h2>
                <p class="final-score">最终得分: <span id="final-score">0</span></p>
                <p class="highest-score">最高分: <span id="highest-score">0</span></p>
                <div class="fruit-stats">
                    <p>你合成了 <span id="watermelon-count">0</span> 个不可名状之物!</p>
                </div>
                <button id="play-again-btn" class="btn btn-play-again">
                    <i class="fas fa-play"></i> 再玩一次
                </button>
            </div>
        </div>

        <div id="victory-modal" class="victory-modal">
            <div class="modal-content">
                <div class="victory-animation">
                    <i class="fas fa-crown victory-icon"></i>
                    <div class="sparkle sparkle-1"></div>
                    <div class="sparkle sparkle-2"></div>
                    <div class="sparkle sparkle-3"></div>
                </div>
                        
                
                <div class="achievement-info">

                    <div class="achievement-text">
                        <h3>见证了<span class="highlight">不可名状之物</span>的降临</h3>
                        <p>你合成了<span class="highlight">???</span></p>
                        
                    </div>
                </div>
                
                <div class="victory-stats">
                    <p>耗时: <span id="victory-time">0</span> 秒</p>
                    <p>当前分数: <span id="victory-score">0</span></p>
                </div>
                
                <div class="victory-buttons">
                    <button id="continue-btn" class="btn btn-continue">
                        <i class="fas fa-play-circle"></i> 继续
                    </button>
                    <button id="cashout-btn" class="btn btn-cashout">
                        <i class="fas fa-coins"></i> 结束
                    </button>
                </div>
                
                <p class="victory-hint">
                    <i class="fas fa-lightbulb"></i> 提示: 继续合成可获得更高分数！
                </p>
            </div>
        </div>
    </div>
    <footer class="footer">
        <p> · 同人制作 · </p>
        <p> 素材来源：pixabay， 爱给网， DOVA-SYNDROME，漫画本体</p>
    </footer>

    <!-- 音效 -->
    <audio id="merge-sound" preload="auto">
    <source src="assets/audio/merge.mp3" type="audio/mpeg">
    </audio>
    <audio id="drop-sound" preload="auto">
        <source src="assets/audio/drop.mp3" type="audio/mpeg">
    </audio>
    <audio id="game-over-sound" preload="auto">
        <source src="assets/audio/game_over.mp3" type="audio/mpeg">
    </audio>
    <audio id="background-music" preload="auto" loop>
        <source src="assets/audio/background_music.mp3" type="audio/mpeg">
    </audio>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="main.js"></script>
</body>
</html>